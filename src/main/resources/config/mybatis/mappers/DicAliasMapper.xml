<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.silita.dao.DicAliasMapper" >

    <insert id="insertDicAlias" parameterType="com.silita.model.DicAlias">
        INSERT INTO
        dic_alias(
          `id`, `name`, `code`, `std_code`, `std_type`,
          `desc`, `remark`, `create_time`, `create_by`
        )
        VALUES (
          #{id}, #{name}, #{code}, #{stdCode}, #{stdType},
          #{desc}, #{remark}, NOW(), #{createBy}
        )
    </insert>

    <update id="updateDicAliasById" parameterType="com.silita.model.DicAlias">
        UPDATE dic_alias SET
        <if test="name !=null and name!=''">
            `name` = #{name},
        </if>
        <if test="code !=null and code!=''">
            `code` = #{code},
        </if>
        <if test="stdCode !=null and stdCode!=''">
            `std_code` = #{stdCode},
        </if>
        <if test="stdType !=null and stdType!=''">
            `std_type` = #{stdType},
        </if>
        <if test="desc !=null and desc!=''">
            `desc` = #{desc},
        </if>
        <if test="remark !=null and remark!=''">
            `remark` = #{remark},
        </if>
        <if test="updateBy !=null and updateBy!=''">
            `update_by` = #{updateBy},
        </if>
        `update_time` = NOW()
        WHERE id = #{id}
    </update>

    <select id="listDicAliasByStdCode" parameterType="com.silita.model.DicAlias" resultType="com.silita.model.DicAlias">
        SELECT *
        FROM dic_alias
        WHERE 1=1
        <if test="stdCode != null and stdCode != ''">
            and `std_code` = #{stdCode}
        </if>
        <if test="name != null and name != ''">
            and `name` like CONCAT('%',#{name},'%')
        </if>
        <if test="stdType != null and stdType != ''">
            and std_type = #{stdType}
        </if>
        <if test="start != null and start != ''">
            LIMIT #{start}, #{pageSize}
        </if>
        order by create_time desc
    </select>

    <select id="getDicAliasCountByStdCode" parameterType="com.silita.model.DicAlias" resultType="Integer">
        SELECT COUNT(*) FROM dic_alias WHERE `std_code` = #{stdCode}
    </select>

    <delete id="deleteDicAliasByIds" parameterType="String">
        DELETE FROM dic_alias
        <where>
            id IN
            <foreach collection="array" open="(" close=")" separator="," item="ele">
                #{ele}
            </foreach>
        </where>
    </delete>

    <select id="queryAliasByName" parameterType="java.util.Map" resultType="java.lang.Integer">
        select count(1)
        from dic_alias
        where 1=1
        and `name` = #{name}
        <if test="stdCode != null and stdCode != ''">
            and `std_code` = #{stdCode}
        </if>
        <if test="stdType != null and stdType != ''">
            and `std_type` = #{stdType}
        </if>
        <if test="id != null and id != ''">
            and id != #{id}
        </if>
    </select>
</mapper>